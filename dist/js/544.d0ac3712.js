"use strict";(self["webpackChunkcafeteria_vue"]=self["webpackChunkcafeteria_vue"]||[]).push([[544],{2544:function(e,r,a){a.r(r),a.d(r,{default:function(){return $}});var s=a(4108);const t=e=>((0,s.ED)("data-v-3762590a"),e=e(),(0,s.ii)(),e),o={key:0,class:"container"},i={class:"card"},d={class:"card-body"},l=t((()=>(0,s.QD)("h1",null,"Orden de pedido:",-1))),c={class:"table table-hover"},n=t((()=>(0,s.QD)("thead",null,[(0,s.QD)("tr",null,[(0,s.QD)("th",{scope:"col"},"#ID"),(0,s.QD)("th",{scope:"col"},"Nombre del produto"),(0,s.QD)("th",{scope:"col"},"Precio $")])],-1))),h={class:"container",style:{"margin-left":"40%"}},u={class:"row row-cols-2 row-cols-lg-5 g-2 g-lg-3"},p={class:"col"},g={class:"d-flex flex-row-reverse bd-highlight"},D={class:"p-2 bd-highlight"},y={class:"col"},v={class:"d-flex flex-row-reverse bd-highlight"},Q={class:"p-2 bd-highlight"},b={class:"col"},P={key:0,class:"d-flex flex-row-reverse bd-highlight"},f={class:"p-2 bd-highlight"},O={key:1,class:"container"},m={class:"card"},w={class:"card-body"},k=t((()=>(0,s.QD)("h1",null,"Pedidos creados:",-1))),x={class:"table table-hover"},z=t((()=>(0,s.QD)("thead",null,[(0,s.QD)("tr",null,[(0,s.QD)("th",{scope:"col"}),(0,s.QD)("th",{scope:"col"},"#ID"),(0,s.QD)("th",{scope:"col"},"Nombre del produto"),(0,s.QD)("th",{scope:"col"},"Precio $")])],-1)));function A(e,r,a,t,A,I){const S=(0,s.E1)("trTable"),W=(0,s.E1)("pedidosHechos");return(0,s.Wz)(),(0,s.An)(s.ae,null,[e.order&&e.order.length>0?((0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",i,[(0,s.QD)("div",d,[l,(0,s.QD)("table",c,[n,(0,s.QD)("tbody",null,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(e.order,(e=>((0,s.Wz)(),(0,s.Az)(S,{key:e.id,order:e},null,8,["order"])))),128))])]),(0,s.QD)("div",h,[(0,s.QD)("div",u,[(0,s.QD)("div",p,[(0,s.QD)("div",g,[(0,s.QD)("div",D,[(0,s.QD)("a",{class:"btn btn-secondary",onClick:r[0]||(r[0]=r=>e.$emit("pay",e.order))},"Pagar")])])]),(0,s.QD)("div",y,[(0,s.QD)("div",v,[(0,s.QD)("div",Q,[(0,s.QD)("button",{onClick:r[1]||(r[1]=r=>I.gotToPaypal(e.order)),class:"btn btn-primary"},"Paypal")])])]),(0,s.QD)("div",b,[A.isPaidPaypal?((0,s.Wz)(),(0,s.An)("div",P,[(0,s.QD)("div",f,[(0,s.QD)("button",{onClick:r[2]||(r[2]=r=>I.getOrderPaypal(e.order)),class:"btn btn-primary"},"Verificar compra paypal")])])):(0,s.g1)("",!0)])])])])])])):(0,s.g1)("",!0),A.pedidosHechos!=[]?((0,s.Wz)(),(0,s.An)("div",O,[(0,s.QD)("div",m,[(0,s.QD)("div",w,[k,(0,s.QD)("table",x,[z,(0,s.QD)("tbody",null,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(A.pedidosHechos,(e=>((0,s.Wz)(),(0,s.Az)(W,{key:e.id,order:e},null,8,["order"])))),128))])])])])])):(0,s.g1)("",!0)],64)}a(3248);var I=a(7192),S=a(8656),W=a.n(S),C={components:{trTable:(0,s.Mn)((()=>a.e(284).then(a.bind(a,6284)))),pedidosHechos:(0,s.Mn)((()=>a.e(372).then(a.bind(a,2372))))},data(){return{pedidosHechos:null,idOrderPayPal:null,isPaidPaypal:!1}},computed:{...(0,I.ys)("orderStore",{order:"order",uID:"uID"}),...(0,I.ys)("authStore",{usuario:"usuario"})},methods:{getOrder(){console.log(this.order),null!=this.order&&0!==this.order.length||this.setItemsLocalStorage()},async gotToPaypal(e){const{body:r}=await this.processPayment(e),{id:a}=r;this.idOrderPayPal=a,this.isPaidPaypal=!0},async getOrderPaypal(e){if(null!==this.idOrderPayPal){new(W())({title:"Espere por favor",allowOutsideClick:!1}),W().showLoading();const r=await this.verifyOrderPaypal(this.idOrderPayPal);!0===r?(W().fire("Pago confirmado","","success"),this.makeAnOrder(e)):W().fire({icon:"error",title:"Oops...",text:"El pago aun no ha sido aprovado"})}},async makeAnOrder(e){if(new(W())({title:"Espere por favor",allowOutsideClick:!1}),W().showLoading(),""!=this.uID&&null!=this.uID)try{const r=await this.makeOrder(e);await this.updateOrderUSer(r);W().fire("¡Pedido creado con éxito!","","success"),this.$router.push({name:"products"})}catch(r){await W().fire({icon:"error",title:"Oops...",text:`${r}`})}else await W().fire({icon:"error",title:"Oops...",text:"Es necesario que inicies sesión"})},...(0,I.ae)("orderStore",["setItemsLocalStorage","loadOrder","processPayment","verifyOrderPaypal","makeOrder"]),...(0,I.ae)("authStore",["updateOrderUSer","setUserStorage"]),async getOrders(){this.usuario.order&&(this.pedidosHechos=await this.loadOrder(this.usuario.order))}},created(){this.getOrder(),this.getOrders()},mounted(){this.getOrder(),this.getOrders()},watch:{uID(){this.setUserStorage()}}},E=a(4100);const H=(0,E.c)(C,[["render",A],["__scopeId","data-v-3762590a"]]);var $=H}}]);
//# sourceMappingURL=544.d0ac3712.js.map