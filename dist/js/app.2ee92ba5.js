(function(){var e={9676:function(e,t,r){"use strict";var o=r(2964);const n=o.c.create({baseURL:"https://api-services-node-cafe.onrender.com"});t.c=n},2336:function(e,t,r){"use strict";var o={};r.r(o),r.d(o,{loadProducts:function(){return U}});var n={};r.r(n),r.d(n,{getProductByTerm:function(){return A},getProductsById:function(){return N}});var a={};r.r(a),r.d(a,{setProducts:function(){return _}});var c={};r.r(c),r.d(c,{closeSession:function(){return F},getLogin:function(){return x},handleCredentialResponse:function(){return q},postUser:function(){return M},setUserStorage:function(){return z},updateOrderUSer:function(){return R},updateUSerAccount:function(){return K}});var i={};r.r(i),r.d(i,{setUsuario:function(){return H},setUsuarioOrder:function(){return J}});var s={};r.r(s),r.d(s,{loadOrder:function(){return oe},makeOrder:function(){return re},processPayment:function(){return ne},setItems:function(){return ee},setItemsLocalStorage:function(){return te},verifyOrderPaypal:function(){return ae}});var u={};r.r(u),r.d(u,{cleanOrderList:function(){return se},setItemOrderList:function(){return ie}});var d=r(7764),l=r(4108);function m(e,t){const r=(0,l.E1)("router-view");return(0,l.Wz)(),(0,l.Az)(r)}var p=r(4100);const g={},f=(0,p.c)(g,[["render",m]]);var h=f,b=r(7464);const v={class:"home"};function y(e,t,r,o,n,a){const c=(0,l.E1)("NavBar"),i=(0,l.E1)("LandingPage");return(0,l.Wz)(),(0,l.An)("div",v,[(0,l.K2)(c),(0,l.K2)(i)])}r(3248);var I={name:"HomeView",methods:{gotToProducts(){this.$router.push({name:"products"})},gotToSigin(){this.$router.push({name:"login"})}},components:{NavBar:(0,l.Mn)((()=>Promise.all([r.e(656),r.e(830)]).then(r.bind(r,3830)))),LandingPage:(0,l.Mn)((()=>r.e(24).then(r.bind(r,2472))))}};const S=(0,p.c)(I,[["render",y]]);var w=S,L={name:"products",component:()=>r.e(764).then(r.bind(r,4764)),children:[{path:"",name:"no-product",component:()=>r.e(520).then(r.bind(r,3520))},{path:":id",name:"show-product",component:()=>r.e(368).then(r.bind(r,6368)),props:e=>({id:e.params.id})}]},k={name:"auth",component:()=>r.e(486).then(r.bind(r,8486)),children:[{path:"",name:"login",component:()=>Promise.all([r.e(656),r.e(600)]).then(r.bind(r,2e3))},{path:"/sigin",name:"sigin",component:()=>Promise.all([r.e(656),r.e(883)]).then(r.bind(r,6883)),props:e=>({id:e.params.id})},{path:"/profile",name:"profile",component:()=>Promise.all([r.e(656),r.e(228)]).then(r.bind(r,4228))}]};const O=[{path:"/",name:"home",component:w},{},{path:"/products",name:"products",...L},{path:"/auth",name:"auth",...k},{path:"/shopping",name:"shopping",component:()=>r.e(264).then(r.bind(r,4264))}],P=(0,b.gv)({history:(0,b.Ow)(),routes:O});var D=P,j=r(7192),C=()=>({isLoading:!0,isShowing:!1,products:[]}),E=r(9676);const U=async({commit:e})=>{const{data:t}=await E.c.get("/api/products/"),{body:r}=t,{product:o}=r,n=[];for(let a of Object.keys(o))n.push({id:a,...o[a]});e("setProducts",n)},A=e=>(t="")=>0===t.length?e.products:e.products.filter((e=>e.nombre.toLowerCase().includes(t.toLowerCase()))),N=e=>(t="")=>{const r=e.products.find((e=>e.id===t));if(r)return{...r}},_=(e,t)=>{e.products=[],e.products=[...e.products,...t],e.isLoading=!1},T={namespaced:!0,actions:o,getters:n,mutations:a,state:C};var $=T,B=()=>({isLoading:!0,usuario:{}});const x=async({commit:e},t)=>{try{const{data:r}=await E.c.post("/api/auth/login",{correo:t.correo,password:t.password}),{usuario:o,token:n}=r;console.log(o);let a=Object;return a.nombre=o.nombre,a.uID=o.uID,a.correo=o.correo,a.token=n,a.isLoading=!1,a.role=o.role,a.order=o.order,a.img=o.img,localStorage.setItem("token",n),localStorage.setItem("nombre",o.nombre),localStorage.setItem("correo",o.correo),localStorage.setItem("uID",o.uID),localStorage.setItem("role",o.role),localStorage.setItem("orderList",o.order),e("setUsuario",{...a}),!0}catch(r){return r}},M=async({commit:e},t)=>{try{const r="User_role";console.log(t.correo);const{data:o}=await E.c.post("/api/user",{nombre:t.nombre,correo:t.correo,password:t.password,role:r}),{ok:n}=o;if(console.log(e),!0===n)return await x(t),!0}catch(r){return r}},q=async({commit:e},t)=>{try{console.log(e);const r=t.credential,{data:o}=await E.c.post("/api/auth/google",{id_token:r}),{usuario:n,token:a}=o;let c=Object;return c.nombre=n.nombre,c.uID=n.uID,c.correo=n.correo,c.isLoading=!1,c.token=a,c.role=n.role,c.order=n.order,c.img=n.img,localStorage.setItem("token",a),localStorage.setItem("nombre",n.nombre),localStorage.setItem("correo",n.correo),localStorage.setItem("uID",n.uID),localStorage.setItem("role",n.role),localStorage.setItem("orderList",n.order),localStorage.setItem("img",n.img),e("setUsuario",{...c}),!0}catch(r){return r}},z=({commit:e})=>{let t=Object;t.nombre=localStorage.getItem("nombre"),t.correo=localStorage.getItem("correo"),t.token=localStorage.getItem("token"),t.uID=localStorage.getItem("uID"),t.role=localStorage.getItem("role"),t.order=localStorage.getItem("orderList"),t.img=localStorage.getItem("img"),null==t.token?t.isLoading=!0:t.isLoading=!1,e("setUsuario",{...t})},F=({commit:e})=>{let t=Object;t.nombre=null,t.correo=null,t.token=null,t.uID=null,t.order=null,t.role=null,t.img=null,t.isLoading=!0,localStorage.removeItem("nombre"),localStorage.removeItem("correo"),localStorage.removeItem("token"),localStorage.removeItem("uID"),localStorage.removeItem("role"),localStorage.removeItem("order"),localStorage.removeItem("img"),e("setUsuario",{...t})},R=async({commit:e},t)=>{try{const r=localStorage.getItem("uID"),o=localStorage.getItem("role");return await E.c.put(`/api/user/${r}`,{role:o,order:t}),localStorage.removeItem("productList"),e("setUsuarioOrder",t),!0}catch(r){return r}},K=async({commit:e},t)=>{try{const r=localStorage.getItem("uID"),o=localStorage.getItem("role"),{correo:n,passwordOld:a,passwordNew:c,nombre:i,img:s}=t;if(a){const{data:t}=await E.c.put(`/api/user/${r}`,{role:o,correo:n,nombre:i,passwordOld:a,passwordNew:c}),{ok:s,body:u}=t;return e("setUsuario",{...u}),s}const{data:u}=await E.c.put(`/api/user/${r}`,{role:o,correo:n,nombre:i}),{ok:d,body:l}=u;return localStorage.setItem("nombre",l.nombre),localStorage.setItem("correo",l.correo),localStorage.setItem("uID",l.uID),localStorage.setItem("role",l.role),localStorage.setItem("orderList",l.order),localStorage.setItem("img",l.img),e("setUsuario",{...l}),d}catch(r){return r}};var W=r(7216);const H=(e,t)=>{e.usuario={nombre:t.nombre,uID:t.uID,correo:t.correo,token:t.token,order:t.order,role:t.role,img:t.img},e.isLoading=t.isLoading},J=(e,t)=>{e.isLoading=!0,e.usuario.order.push(t),e.isLoading=!1},V={namespaced:!0,actions:c,getters:W,mutations:i,state:B};var G=V,Q=()=>({isLoading:!0,uID:"",isPaid:!1,order:[]}),X=r(2964);const Y=X.c.create({baseURL:"https://api-bd-node---cafe-default-rtdb.firebaseio.com"});var Z=Y;const ee=async({commit:e,rootGetters:t},r)=>{try{const o=t["products/getProductsById"](r);let n=Object;n.nombreProduct=o.nombre,n.productId=o.uID,n.productPrice=o.price,n.productCantidad=o.cantidad,n.productCategory=o.category,e("setItemOrderList",n)}catch(o){return o}},te=async({commit:e})=>{try{let t=[],r=localStorage.getItem("productList");r&&(t=JSON.parse(r),Array.isArray(t)||(t=[])),e("setItemOrderListLocalStorage",t)}catch(t){return t}},re=async({commit:e},t)=>{try{const r={headers:{awt_token:localStorage.getItem("token")}};let o=[];t.forEach((e=>{o.push(e)}));let n=o.map((e=>`Producto: ${e.name}, Precio: ${e.precio}`));await E.c.patch("/api/products/list",{order:t},r);const a=await Z.post("/order.json",t),{data:c}=a,i=c.name;return await E.c.post("/api/email",{to:localStorage.getItem("correo"),subject:"Pedido realizado",message:`Detalles del pedido:\n${n.join("\n")}`},r),localStorage.removeItem("productList"),e("cleanOrderList"),i}catch(r){return r}},oe=async({commit:e},t)=>{try{var r=t.split(",");let e=[];for(let t=0;t<r.length;t++){const o=r[t],{data:n}=await Z.get(`/order/${o}.json`);null!==n&&e.push(n)}return e}catch(o){console.log(o)}},ne=async({commit:e},t)=>{try{const e=await E.c.post("/api/paypal/create",t);return window.open(e.data.body.links[1].href,"_blank"),e.data}catch(r){return r}},ae=async({commit:e},t)=>{try{const{data:e}=await E.c.get(`/api/paypal/getOrder/${t}`),{body:r}=e,{status:o}=r;return"APPROVED"===o}catch(r){return r}};var ce=r(8896);const ie=(e,t)=>{try{e.uID=t.uID,e.isLoading=!0;const r={name:t.nombreProduct,id:t.productId,precio:t.productPrice,cantidad:t.productCantidad,categoria:t.productCategory};e.order.push(r);const o=JSON.stringify(e.order);localStorage.setItem("productList",o),e.isLoading=!1}catch(r){console.log(r)}},se=e=>{try{e.isLoading=!0,e.order=null}catch(t){console.log(t)}},ue={namespaced:!0,actions:s,getters:ce,mutations:u,state:Q};var de=ue,le=(0,j.eC)({modules:{products:$,authStore:G,orderStore:de}}),me=r(6088);r(1128);(0,d.W0)(h).use(le).use(me.cp,{clientId:"964193955907-n5idd56328ouham4h96liq95afhs3frq.apps.googleusercontent.com"}).use(D).mount("#app")},7216:function(){},8896:function(){}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var c=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],a=e[d][2];for(var i=!0,s=0;s<o.length;s++)(!1&a||c>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[s])}))?o.splice(s--,1):(i=!1,a<c&&(c=a));if(i){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,o){return r.f[o](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{24:"4df12019",44:"f6bd722d",148:"216cf65d",228:"d573f7b7",264:"210d121b",284:"8c63c1e1",368:"2f6de979",372:"9117b544",449:"ad70da4d",486:"ceaf3730",520:"3208ac99",544:"d0ac3712",600:"87665ad0",656:"a5a2bcc6",764:"5846d6ef",830:"688d4359",883:"fabbbbdf",944:"2871126b"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+"."+{24:"f3429d19",228:"f3cf3ec8",368:"f12d0530",520:"68c139c3",544:"ae2434ea",600:"4157424d",883:"0aa1556b",944:"424a79da"}[e]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="cafeteria_vue:";r.l=function(o,n,a,c){if(e[o])e[o].push(n);else{var i,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==t+a){i=l;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+a),i.src=o),e[o]=[n];var m=function(t,r){i.onerror=i.onload=null,clearTimeout(p);var n=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,o,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var c=function(r){if(a.onerror=a.onload=null,"load"===r.type)o();else{var c=r&&r.type,i=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+": "+i+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=c,s.request=i,a.parentNode&&a.parentNode.removeChild(a),n(s)}};return a.onerror=a.onload=c,a.href=t,r?r.parentNode.insertBefore(a,r.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=r[o],a=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===e||a===t))return n}var c=document.getElementsByTagName("style");for(o=0;o<c.length;o++){n=c[o],a=n.getAttribute("data-href");if(a===e||a===t)return n}},o=function(o){return new Promise((function(n,a){var c=r.miniCssF(o),i=r.p+c;if(t(c,i))return n();e(o,i,null,n,a)}))},n={524:0};r.f.miniCss=function(e,t){var r={24:1,228:1,368:1,520:1,544:1,600:1,883:1,944:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=o(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={524:0};r.f.j=function(t,o){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var a=new Promise((function(r,o){n=e[t]=[r,o]}));o.push(n[2]=a);var c=r.p+r.u(t),i=new Error,s=function(o){if(r.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var a=o&&("load"===o.type?"missing":o.type),c=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+c+")",i.name="ChunkLoadError",i.type=a,i.request=c,n[1](i)}};r.l(c,s,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,c=o[0],i=o[1],s=o[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var d=s(r)}for(t&&t(o);u<c.length;u++)a=c[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},o=self["webpackChunkcafeteria_vue"]=self["webpackChunkcafeteria_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[999],(function(){return r(2336)}));o=r.O(o)})();
//# sourceMappingURL=app.2ee92ba5.js.map