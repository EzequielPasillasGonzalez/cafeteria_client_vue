{"version":3,"file":"js/544.d0ac3712.js","mappings":"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","sources":["webpack://cafeteria_vue/./src/modules/products/components/tableShop_Component.vue","webpack://cafeteria_vue/./src/modules/products/components/tableShop_Component.vue?2078"],"sourcesContent":["<template>\r\n    <div  v-if=\"order && order.length > 0\"  class=\"container\">\r\n        <div class=\"card\">\r\n            <div class=\"card-body\">\r\n                <h1>Orden de pedido:</h1>                \r\n                <table class=\"table table-hover\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">#ID</th>\r\n                        <th scope=\"col\">Nombre del produto</th>\r\n                        <th scope=\"col\">Precio $</th>                \r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>              \r\n                        <trTable v-for=\"product in order\" :key=\"product.id\" :order=\"product\"/>              \r\n                    </tbody>\r\n                </table>\r\n\r\n                <div class=\"container\" style=\"margin-left: 40%;\">\r\n                    <div class=\"row row-cols-2 row-cols-lg-5 g-2 g-lg-3\">\r\n                        <div class=\"col\">\r\n                            <div class=\"d-flex flex-row-reverse bd-highlight\">\r\n                                <div class=\"p-2 bd-highlight\">                        \r\n                                    <a class=\"btn btn-secondary\" @click=\"$emit('pay', order)\">Pagar</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col\">\r\n                            <div class=\"d-flex flex-row-reverse bd-highlight\">\r\n                                <div class=\"p-2 bd-highlight\">                        \r\n                                    <button @click=\"gotToPaypal(order)\" class=\"btn btn-primary\">Paypal</button>\r\n                                </div>\r\n                            </div>    \r\n                        </div>\r\n\r\n                        <div class=\"col\">\r\n                            <div v-if=\"isPaidPaypal\" class=\"d-flex flex-row-reverse bd-highlight\">\r\n                                <div class=\"p-2 bd-highlight\">                        \r\n                                    <button @click=\"getOrderPaypal(order)\" class=\"btn btn-primary\">Verificar compra paypal</button>\r\n                                </div>\r\n                            </div>  \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                \r\n\r\n\r\n                \r\n               \r\n                \r\n\r\n            </div>\r\n        </div>        \r\n    </div>\r\n\r\n    <div v-if=\"pedidosHechos != [] \" class=\"container\">\r\n        <div class=\"card\">\r\n            <div class=\"card-body\">\r\n                <h1>Pedidos creados:</h1>                \r\n                <table class=\"table table-hover\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\"></th>\r\n                        <th scope=\"col\">#ID</th>\r\n                        <th scope=\"col\">Nombre del produto</th>\r\n                        <th scope=\"col\">Precio $</th>                \r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>              \r\n                        <pedidosHechos v-for=\"(product) in pedidosHechos\" :key=\"product.id\" :order=\"product\"/>              \r\n                    </tbody>\r\n                </table>\r\n\r\n                \r\n\r\n            </div>\r\n        </div>        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'vuex'\r\nimport { defineAsyncComponent } from 'vue'\r\nimport Swal from \"sweetalert2\";\r\n\r\nexport default {\r\n\r\n    components: {\r\n        trTable : defineAsyncComponent(() => import('../components/trTable_Componente.vue')),        \r\n        pedidosHechos : defineAsyncComponent(() => import('../components/pedidosHechos_trTable_Componente.vue')),        \r\n    },\r\n    data(){\r\n        return{\r\n            pedidosHechos: null,\r\n            idOrderPayPal: null,\r\n            isPaidPaypal: false\r\n        }\r\n    },\r\n\r\n    computed: {        \r\n        ...mapState('orderStore', {\r\n            order: 'order',\r\n            uID: 'uID', \r\n        }),\r\n        ...mapState('authStore', {\r\n            usuario: 'usuario'\r\n        }),\r\n    \r\n    },\r\n    methods: {\r\n        getOrder(){\r\n            console.log(this.order);\r\n            if(this.order == null || this.order.length === 0){\r\n                this.setItemsLocalStorage()\r\n            }\r\n        },        \r\n        async gotToPaypal(order){\r\n            const {body} = await this.processPayment(order)                        \r\n            const {id} = body\r\n            this.idOrderPayPal = id\r\n            this.isPaidPaypal = true\r\n        },\r\n        async getOrderPaypal(order){\r\n            if(this.idOrderPayPal !== null){\r\n                new Swal({\r\n                    //? Mostrar alertas\r\n                    title: \"Espere por favor\",\r\n                    allowOutsideClick: false,\r\n                });\r\n\r\n                Swal.showLoading();\r\n                const resp = await this.verifyOrderPaypal(this.idOrderPayPal)                   \r\n                if(resp === true){\r\n                    Swal.fire(\"Pago confirmado\", \"\", \"success\");\r\n                    this.makeAnOrder(order)\r\n                }else{\r\n                    Swal.fire({\r\n                    icon: \"error\",\r\n                    title: \"Oops...\",\r\n                    text: `El pago aun no ha sido aprovado`,\r\n                });\r\n                }\r\n\r\n                \r\n            }\r\n            \r\n        },\r\n        async makeAnOrder(order){            \r\n\r\n            new Swal({\r\n                //? Mostrar alertas\r\n                title: \"Espere por favor\",\r\n                allowOutsideClick: false,\r\n            });\r\n\r\n            Swal.showLoading();\r\n\r\n            if(this.uID == '' || this.uID == null){\r\n                await Swal.fire({\r\n                    icon: \"error\",\r\n                    title: \"Oops...\",\r\n                    text: `Es necesario que inicies sesión`,\r\n                });\r\n\r\n                return\r\n            }\r\n            \r\n            try {                  \r\n                const resp = await this.makeOrder(order)\r\n\r\n                const data = await this.updateOrderUSer(resp)\r\n\r\n                Swal.fire(\"¡Pedido creado con éxito!\", \"\", \"success\");  \r\n                \r\n                this.$router.push({name: 'products'})\r\n                \r\n            } catch(error) {\r\n            \r\n                await Swal.fire({\r\n                    icon: \"error\",\r\n                    title: \"Oops...\",\r\n                    text: `${error}`,\r\n                });\r\n            }            \r\n\r\n\r\n        },\r\n\r\n        ...mapActions(\"orderStore\", [\r\n            \"setItemsLocalStorage\",\r\n            \"loadOrder\",\r\n            \"processPayment\",\r\n            \"verifyOrderPaypal\",\r\n            'makeOrder'\r\n        ]\r\n        ),      \r\n        ...mapActions(\"authStore\", [\r\n            'updateOrderUSer',\r\n            'setUserStorage'            \r\n        ]),\r\n        \r\n        async getOrders(){\r\n            \r\n            if(this.usuario.order){\r\n                this.pedidosHechos = await this.loadOrder(this.usuario.order)\r\n            }\r\n\r\n            // for (let index = 0; index < this.pedidosHechos.length; index++) {\r\n            //     const element = this.pedidosHechos[index];\r\n            //     console.log(element);\r\n            // }\r\n            //console.log(this.pedidosHechos);\r\n        }\r\n    },\r\n    created(){        \r\n        this.getOrder(),\r\n        this.getOrders()\r\n    },  \r\n    mounted(){        \r\n        this.getOrder(),\r\n        this.getOrders()\r\n    },  \r\n    watch: {\r\n        uID(){ \r\n             //? Actualiza el view cuando el usuario pulsa otro producto\r\n            this.setUserStorage()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.container{\r\n    margin-top: 3%;\r\n}\r\n\r\n</style>","import { render } from \"./tableShop_Component.vue?vue&type=template&id=3762590a&scoped=true\"\nimport script from \"./tableShop_Component.vue?vue&type=script&lang=js\"\nexport * from \"./tableShop_Component.vue?vue&type=script&lang=js\"\n\nimport \"./tableShop_Component.vue?vue&type=style&index=0&id=3762590a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3762590a\"]])\n\nexport default __exports__"],"names":["key","class","_createElementVNode","scope","style","_createElementBlock","_Fragment","_ctx","order","length","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_renderList","product","_createBlock","_component_trTable","id","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","onClick","_cache","$event","$emit","_hoisted_12","_hoisted_13","_hoisted_14","$options","gotToPaypal","_hoisted_15","$data","isPaidPaypal","_hoisted_16","_hoisted_17","getOrderPaypal","_createCommentVNode","pedidosHechos","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_component_pedidosHechos","components","trTable","defineAsyncComponent","data","idOrderPayPal","computed","mapState","uID","usuario","methods","getOrder","console","log","this","setItemsLocalStorage","body","processPayment","Swal","title","allowOutsideClick","resp","verifyOrderPaypal","makeAnOrder","icon","text","makeOrder","updateOrderUSer","$router","push","name","error","mapActions","getOrders","loadOrder","created","mounted","watch","setUserStorage","__exports__","render"],"sourceRoot":""}